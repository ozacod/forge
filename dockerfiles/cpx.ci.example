# cpx.ci - Cross-compilation configuration
# This file defines which Docker images to use for building your project
# Note: All triplets use static library linkage by default

# List of targets to build
targets:
  - name: linux-amd64
    dockerfile: Dockerfile.linux-amd64
    image: cpx-linux-amd64
    triplet: x64-linux
    platform: linux/amd64
    
  - name: linux-arm64
    dockerfile: Dockerfile.linux-arm64
    image: cpx-linux-arm64
    triplet: arm64-linux
    platform: linux/arm64

  - name: linux-amd64-musl
    dockerfile: Dockerfile.linux-amd64-musl
    image: cpx-linux-amd64-musl
    triplet: x64-linux
    platform: linux/amd64
    
  - name: linux-arm64-musl
    dockerfile: Dockerfile.linux-arm64-musl
    image: cpx-linux-arm64-musl
    triplet: arm64-linux
    platform: linux/arm64

  # Windows cross-compilation using MinGW (builds from Linux)
  - name: windows-amd64
    dockerfile: Dockerfile.windows-amd64-mingw
    image: cpx-windows-amd64
    triplet: x64-mingw-static
    platform: linux/amd64
    
  # macOS targets require osxcross setup (placeholder)
  # - name: macos-amd64
  #   dockerfile: Dockerfile.macos-amd64
  #   image: cpx-macos-amd64
  #   triplet: x64-osx
  #
  # - name: macos-arm64
  #   dockerfile: Dockerfile.macos-arm64
  #   image: cpx-macos-arm64
  #   triplet: arm64-osx

# Build configuration
build:
  # CMake build type (Debug, Release, RelWithDebInfo, MinSizeRel)
  type: Release
  
  # Optimization level (0, 1, 2, 3, s, fast)
  optimization: 2
  
  # Number of parallel jobs (0 = auto)
  jobs: 0
  
  # Additional CMake arguments
  cmake_args: []
  
  # Additional build arguments
  build_args: []

# Output directory for artifacts
output: .bin/ci

